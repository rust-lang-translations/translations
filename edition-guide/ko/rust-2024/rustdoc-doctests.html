<!DOCTYPE HTML>
<html lang="ko" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Rustdoc 통합 테스트 - The Rust Edition Guide</title>


        <!-- Custom HTML head -->

        <script async src="https://www.googletagmanager.com/gtag/js?id=G-L455DH98TK"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
        
          gtag('config', 'G-L455DH98TK');
        </script>
        
        
        <script>
            (function () {
                // See these pages for details:
                // https://developers.google.com/search/docs/crawling-indexing/consolidate-duplicate-urls
                // https://developers.google.com/search/docs/crawling-indexing/javascript/javascript-seo-basics
        
                function gen_canonical_href(lang) {
        
                    let base = "https://rust-lang-translations.org/edition-guide";
        
                    let canonical_href;
                    if (lang == "en") {
                        canonical_href = `${base}/rust-2024/rustdoc-doctests.md`;
                    } else {
                        canonical_href = `${base}/${lang}/rust-2024/rustdoc-doctests.md`;
                    }
                    canonical_href = canonical_href.slice(0, -"md".length) + "html";
                    if (canonical_href.endsWith("/index.html")) {
                        canonical_href = canonical_href.slice(0, -"index.html".length);
                    }
                    return canonical_href;
                }
        
                const canonical_href = gen_canonical_href("ko");

                let link = document.createElement("link");
                link.rel = "canonical";
                link.href = canonical_href;
                document.head.appendChild(link);
        
        
                const langs = ["en"  , "ko" ];
        
                for (const lang of langs) {
                    const canonical_href = gen_canonical_href(lang);
        
                    let link = document.createElement("link");
                    link.rel = "alternate";
                    link.hreflang = lang;
                    link.href = canonical_href;
                    document.head.appendChild(link);
                }
            })()
        </script>
        

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/language-picker.css">


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rust Edition Guide</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rust-lang-translations/project" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/rust-lang/edition-guide/edit/master/src/rust-2024/rustdoc-doctests.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="rustdoc-통합-테스트"><a class="header" href="#rustdoc-통합-테스트">Rustdoc 통합 테스트</a></h1>
<h2 id="요약"><a class="header" href="#요약">요약</a></h2>
<ul>
<li><a href="../../rustdoc/write-documentation/documentation-tests.html">Doctests</a> are now combined into a single binary which should result in a significant performance improvement.</li>
</ul>
<h2 id="세부-정보"><a class="header" href="#세부-정보">세부 정보</a></h2>
<p>Prior the the 2024 Edition, rustdoc's "test" mode would compile each code block in your documentation as a separate executable. Although this was relatively simple to implement, it resulted in a significant performance burden when there were a large number of documentation tests. Starting with the 2024 Edition, rustdoc will attempt to combine documentation tests into a single binary, significantly reducing the overhead for compiling doctests.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// Adds two numbers
///
/// ```
/// assert_eq!(add(1, 1), 2);
/// ```
pub fn add(left: u64, right: u64) -&gt; u64 {
    left + right
}

/// 두 숫자를 뺍니다
///
/// ```
/// assert_eq!(subtract(2, 1), 1);
/// ```
pub fn subtract(left: u64, right: u64) -&gt; u64 {
    left - right
}
<span class="boring">}</span></code></pre></pre>
<p>이 예제에서는 두 개의 doctest가 이제 단일 실행 파일로 컴파일됩니다. Rustdoc은 본질적으로 각 예제를 단일 바이너리 내의 별도 함수에 배치합니다. 테스트는 이전과 마찬가지로 독립적인 프로세스에서 계속 실행되므로 전역 상태(전역 정적과 같은)는 여전히 올바르게 작동해야 합니다.<sup class="footnote-reference"><a href="#implementation">1</a></sup></p>
<p>이 변경 사항은 결합된 실행 파일에서 작동하지 않을 수 있는 기존 doctest와의 잠재적인 비호환성을 피하기 위해 2024 에디션에서만 사용할 수 있습니다. 그러나 이러한 비호환성은 극히 드물 것으로 예상됩니다.</p>
<div class="footnote-definition" id="implementation"><sup class="footnote-definition-label">1</sup>
<p>For more information on the details of how this work, see <a href="https://blog.guillaume-gomez.fr/articles/2024-08-17+Doctests+-+How+were+they+improved%3F">"Doctests - How were they improved?"</a>.</p>
</div>
<h3 id="standalone_crate-태그"><a class="header" href="#standalone_crate-태그"><code>standalone_crate</code> 태그</a></h3>
<p>어떤 상황에서는 rustdoc이 예제를 단일 실행 파일로 결합할 수 없습니다. rustdoc은 이것이 불가능한지 자동으로 감지하려고 시도합니다. 예를 들어, 테스트는 다음과 같은 경우 다른 테스트와 결합되지 않습니다.</p>
<ul>
<li><a href="../../rustdoc/write-documentation/documentation-tests.html#attributes"><code>compile_fail</code></a> 태그를 사용합니다. 이 태그는 예제가 컴파일에 실패해야 함을 나타냅니다.</li>
<li>예제의 에디션을 나타내는 <a href="../../rustdoc/write-documentation/documentation-tests.html#attributes"><code>edition</code></a> 태그를 사용합니다.<sup class="footnote-reference"><a href="#edition-tag">2</a></sup></li>
<li>다른 테스트와 잠재적으로 충돌할 수 있는 <a href="../../std/alloc/trait.GlobalAlloc.html"><code>global_allocator</code></a> 속성과 같은 전역 속성을 사용합니다.</li>
<li>크레이트 전체 속성(예: <code>#![feature(...)]</code>)을 정의합니다.</li>
<li><code>$crate</code> 경로가 올바르게 작동하지 않으므로 <code>$crate</code>를 사용하는 매크로를 정의합니다.</li>
</ul>
<p>그러나 rustdoc은 예제를 다른 예제와 결합할 수 없는 <em>모든</em> 상황을 자동으로 결정할 수 없습니다. 이러한 상황에서는 <code>standalone_crate</code> 언어 태그를 추가하여 예제가 별도의 실행 파일로 빌드되어야 함을 나타낼 수 있습니다. 예를 들어:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>//! ```
//! let location = std::panic::Location::caller();
//! assert_eq!(location.line(), 5);
//! ```
<span class="boring">}</span></code></pre></pre>
<p>이것은 예제가 컴파일되는 코드 구조에 민감하며, doctest가 결합되는 방식에 따라 줄 번호가 변경되므로 "결합된" 접근 방식으로는 작동하지 않습니다. 이러한 상황에서는 <code>standalone_crate</code> 태그를 추가하여 이전 에디션과 마찬가지로 예제가 별도로 빌드되도록 강제할 수 있습니다. 예:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>//! ```standalone_crate
//! let location = std::panic::Location::caller();
//! assert_eq!(location.line(), 5);
//! ```
<span class="boring">}</span></code></pre></pre>
<div class="footnote-definition" id="edition-tag"><sup class="footnote-definition-label">2</sup>
<p>rustdoc은 전체 크레이트가 2024 에디션 이상인 경우에만 테스트를 결합합니다. 이전 에디션에서 <code>edition2024</code> 태그를 사용해도 해당 테스트가 결합되지 않습니다.</p>
</div>
<h2 id="마이그레이션"><a class="header" href="#마이그레이션">마이그레이션</a></h2>
<p><code>standalone_crate</code> 태그로 주석을 달아야 하는 doctest를 결정하는 자동 마이그레이션은 없습니다. 마이그레이션할 때 주어진 doctest가 올바르게 작동하지 않을 가능성은 매우 낮습니다. 크레이트를 2024 에디션으로 업데이트한 다음 문서 테스트를 실행하여 실패하는 것이 있는지 확인하는 것이 좋습니다. 실패하는 것이 있다면 결합된 접근 방식과 호환되도록 다시 작성할 수 있는지 분석하거나, 또는 이전 동작을 유지하기 위해 <code>standalone_crate</code> 태그를 추가해야 합니다.</p>
<p>주의하고 피해야 할 몇 가지 사항은 다음과 같습니다.</p>
<ul>
<li><a href="https://doc.rust-lang.org/std/panic/struct.Location.html"><code>std::panic::Location</code></a>의 값 또는 <code>Location</code>을 사용하는 것들을 확인합니다. 여러 테스트가 이제 동일한 테스트 크레이트에 위치하므로 코드의 위치가 달라졌습니다.</li>
<li>이제 다른 모듈 경로를 갖는 <a href="https://doc.rust-lang.org/std/any/fn.type_name.html"><code>std::any::type_name</code></a>의 값을 확인합니다.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../rust-2024/rustdoc.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../rust-2024/rustdoc-nested-includes.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../rust-2024/rustdoc.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../rust-2024/rustdoc-nested-includes.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../theme/language-picker.js"></script>


    </div>
    </body>
</html>
