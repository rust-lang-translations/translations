<!DOCTYPE HTML>
<html lang="ko" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>반박 가능성: 패턴이 매치에 실패할 수 있는지 여부 - The Rust Programming Language</title>


        <!-- Custom HTML head -->

        <script async src="https://www.googletagmanager.com/gtag/js?id=G-L455DH98TK"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
        
          gtag('config', 'G-L455DH98TK');
        </script>
        
        
        <script>
            (function () {
                // See these pages for details:
                // https://developers.google.com/search/docs/crawling-indexing/consolidate-duplicate-urls
                // https://developers.google.com/search/docs/crawling-indexing/javascript/javascript-seo-basics
        
                function gen_canonical_href(lang) {
        
                    let base = "https://rust-lang-translations.org/book";
        
                    let canonical_href;
                    if (lang == "en") {
                        canonical_href = `${base}/ch19-02-refutability.md`;
                    } else {
                        canonical_href = `${base}/${lang}/ch19-02-refutability.md`;
                    }
                    canonical_href = canonical_href.slice(0, -"md".length) + "html";
                    if (canonical_href.endsWith("/index.html")) {
                        canonical_href = canonical_href.slice(0, -"index.html".length);
                    }
                    return canonical_href;
                }
        
                const canonical_href = gen_canonical_href("ko");

                let link = document.createElement("link");
                link.rel = "canonical";
                link.href = canonical_href;
                document.head.appendChild(link);
        
        
                const langs = ["en"  , "ja"  , "ru"  , "ko" ];
        
                for (const lang of langs) {
                    const canonical_href = gen_canonical_href(lang);
        
                    let link = document.createElement("link");
                    link.rel = "alternate";
                    link.hreflang = lang;
                    link.href = canonical_href;
                    document.head.appendChild(link);
                }
            })()
        </script>
        

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="ferris.css">
        <link rel="stylesheet" href="theme/2018-edition.css">
        <link rel="stylesheet" href="theme/semantic-notes.css">
        <link rel="stylesheet" href="theme/listing.css">
        <link rel="stylesheet" href="theme/language-picker.css">


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rust Programming Language</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rust-lang-translations/project" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="반박-가능성-패턴이-매치에-실패할-수-있는지-여부"><a class="header" href="#반박-가능성-패턴이-매치에-실패할-수-있는지-여부">반박 가능성: 패턴이 매치에 실패할 수 있는지 여부</a></h2>
<p>패턴에는 두 가지 형태가 있습니다: 반박 가능(refutable)과 반박 불가능(irrefutable)입니다. 전달될 수 있는 모든 가능한 값에 대해 매치되는 패턴을 _반박 불가능_하다고 합니다. 예를 들어 <code>let x = 5;</code> 문장에서 <code>x</code>는 무엇이든 매치되므로 매칭에 실패할 수 없습니다. 반면 일부 가능한 값에 대해 매칭이 실패할 수 있는 패턴을 _반박 가능_하다고 합니다. 한 예로 <code>if let Some(x) = a_value</code> 표현식에서 <code>Some(x)</code>를 들 수 있는데, 만약 <code>a_value</code> 변수의 값이 <code>Some</code>이 아니라 <code>None</code>이라면 <code>Some(x)</code> 패턴은 매치되지 않기 때문입니다.</p>
<p>함수 매개변수, <code>let</code> 문, 그리고 <code>for</code> 루프는 오직 반박 불가능한 패턴만 허용할 수 있습니다. 값이 매치되지 않을 때 프로그램이 의미 있는 작업을 수행할 수 없기 때문입니다. <code>if let</code>과 <code>while let</code> 표현식, 그리고 <code>let</code>-<code>else</code> 문은 반박 가능한 패턴과 반박 불가능한 패턴을 모두 허용하지만, 컴파일러는 반박 불가능한 패턴에 대해 경고를 보냅니다. 왜냐하면 조건문은 본질적으로 발생 가능한 실패를 처리하기 위한 것이기 때문입니다. 즉, 조건문의 기능은 성공 또는 실패에 따라 다르게 동작할 수 있는 능력에 있습니다.</p>
<p>일반적으로 여러분은 반박 가능한 패턴과 반박 불가능한 패턴의 구분에 대해 걱정할 필요가 없습니다. 하지만 에러 메시지에서 이 개념을 보게 되었을 때 대응할 수 있도록 익숙해질 필요는 있습니다. 그런 경우, 코드의 의도된 동작에 따라 패턴을 변경하거나 패턴과 함께 사용하는 구문을 변경해야 할 것입니다.</p>
<p>러스트가 반박 불가능한 패턴을 요구하는 곳에 반박 가능한 패턴을 사용하려고 시도했을 때, 그리고 그 반대의 경우에 어떤 일이 일어나는지 예제를 통해 살펴봅시다. 목록 19-8은 <code>let</code> 문을 보여주지만, 패턴으로 반박 가능한 패턴인 <code>Some(x)</code>를 지정했습니다. 예상하시겠지만, 이 코드는 컴파일되지 않습니다.</p>
<Listing number="19-8" caption="Attempting to use a refutable pattern with `let`">
<pre><code class="language-rust ignore does_not_compile"><span class="boring">fn main() {
</span><span class="boring">    let some_option_value: Option&lt;i32&gt; = None;
</span>    let Some(x) = some_option_value;
<span class="boring">}</span></code></pre>
</Listing>
<p>만약 <code>some_option_value</code>가 <code>None</code> 값이었다면 <code>Some(x)</code> 패턴 매칭에 실패했을 것이고, 이는 해당 패턴이 반박 가능함을 의미합니다. 하지만 <code>let</code> 문은 오직 반박 불가능한 패턴만 허용할 수 있는데, <code>None</code> 값에 대해 코드가 수행할 수 있는 유효한 작업이 없기 때문입니다. 컴파일 타임에 러스트는 반박 불가능한 패턴이 필요한 곳에 반박 가능한 패턴을 사용하려 했다고 불평할 것입니다.</p>
<pre><code class="language-console">$ cargo run
   Compiling patterns v0.1.0 (file:///projects/patterns)
error[E0005]: 로컬 바인딩에 반박 가능한 패턴이 사용되었습니다
 --&gt; src/main.rs:3:9
  |
3 |     let Some(x) = some_option_value;
  |         ^^^^^^^ `None` 패턴이 커버되지 않았습니다
  |
  = note: `let` 바인딩은 구조체나 변형이 하나뿐인 열거형과 같은 "반박 불가능한 패턴"을 요구합니다
  = note: 더 자세한 정보는 https://doc.rust-lang.org/book/ch18-02-refutability.html 를 방문하세요
  = note: 매칭된 값의 타입은 `Option&lt;i32&gt;`입니다
help: 매치되지 않는 변형을 처리하기 위해 `let else` 사용을 고려해 보세요
  |
3 |     let Some(x) = some_option_value else { todo!() };
  |                                     ++++++++++++++++

이 에러에 대한 더 자세한 정보를 원하시면 `rustc --explain E0005`를 시도해 보세요.
에러: 1개의 이전 에러로 인해 `patterns` (바이너리 "patterns")를 컴파일할 수 없습니다
</code></pre>
<p>패턴 <code>Some(x)</code>로 모든 유효한 값을 커버하지 않았기(그리고 커버할 수도 없었기!) 때문에, 러스트는 당연하게도 컴파일러 에러를 발생시킵니다.</p>
<p>반박 불가능한 패턴이 필요한 곳에 반박 가능한 패턴이 있다면, 패턴을 사용하는 코드를 변경함으로써 이를 고칠 수 있습니다. <code>let</code> 대신 <code>if let</code>을 사용하는 것이죠. 그렇게 하면 패턴이 매치되지 않을 때 중괄호 안의 코드를 그냥 건너뛰어, 프로그램이 유효하게 계속 실행될 수 있는 방법을 제공합니다. 목록 19-9는 목록 19-8의 코드를 고치는 방법을 보여줍니다.</p>
<Listing number="19-9" caption="Using `if let` and a block with refutable patterns instead of `let`">
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">fn main() {
</span><span class="boring">    let some_option_value: Option&lt;i32&gt; = None;
</span>    if let Some(x) = some_option_value {
        println!("{x}");
    }
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>우리는 코드에게 탈출구를 주었습니다! 이제 이 코드는 완벽하게 유효합니다. 하지만 목록 19-10에 나타난 것처럼 <code>if let</code>에 <code>x</code>와 같이 항상 매치되는 반박 불가능한 패턴을 준다면, 컴파일러는 경고를 보낼 것입니다.</p>
<Listing number="19-10" caption="Attempting to use an irrefutable pattern with `if let`">
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">fn main() {
</span>    if let x = 5 {
        println!("{x}");
    };
<span class="boring">}</span></code></pre></pre>
</Listing>
<p>러스트는 반박 불가능한 패턴과 함께 <code>if let</code>을 사용하는 것이 의미가 없다고 불평합니다.</p>
<pre><code class="language-console">$ cargo run
   Compiling patterns v0.1.0 (file:///projects/patterns)
warning: 반박 불가능한 `if let` 패턴입니다
 --&gt; src/main.rs:2:8
  |
2 |     if let x = 5 {
  |        ^^^^^^^^^
  |
  = note: 이 패턴은 항상 매치되므로, `if let`은 쓸모가 없습니다
  = help: `if let`을 `let`으로 바꾸는 것을 고려해 보세요
  = note: `#[warn(irrefutable_let_patterns)]` 경고가 기본적으로 켜져 있습니다

경고: `patterns` (바이너리 "patterns")에서 1개의 경고가 생성되었습니다
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.39s
     Running `target/debug/patterns`
5
</code></pre>
<p>이러한 이유로, 매치 가지는 반드시 반박 가능한 패턴을 사용해야 합니다. 단, 마지막 가지는 남은 모든 값을 반박 불가능한 패턴으로 매치해야 합니다. 러스트는 단 하나의 가지만 있는 <code>match</code>에서 반박 불가능한 패턴을 사용하는 것을 허용하지만, 이 문법은 딱히 유용하지 않으며 더 간단한 <code>let</code> 문으로 대체될 수 있습니다.</p>
<p>이제 패턴을 어디에서 사용하는지, 그리고 반박 가능한 패턴과 반박 불가능한 패턴의 차이가 무엇인지 알게 되었으니, 패턴을 만들기 위해 사용할 수 있는 모든 문법을 다뤄봅시다.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="ch19-01-all-the-places-for-patterns.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="ch19-03-pattern-syntax.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="ch19-01-all-the-places-for-patterns.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="ch19-03-pattern-syntax.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="ferris.js"></script>
        <script src="theme/language-picker.js"></script>


    </div>
    </body>
</html>
