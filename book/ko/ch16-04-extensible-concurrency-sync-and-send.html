<!DOCTYPE HTML>
<html lang="ko" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Sync와 Send 트레이트로 확장 가능한 동시성 - The Rust Programming Language</title>


        <!-- Custom HTML head -->

        <script async src="https://www.googletagmanager.com/gtag/js?id=G-L455DH98TK"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
        
          gtag('config', 'G-L455DH98TK');
        </script>
        
        
        <script>
            (function () {
                // See these pages for details:
                // https://developers.google.com/search/docs/crawling-indexing/consolidate-duplicate-urls
                // https://developers.google.com/search/docs/crawling-indexing/javascript/javascript-seo-basics
        
                function gen_canonical_href(lang) {
        
                    let base = "https://rust-lang-translations.org/book";
        
                    let canonical_href;
                    if (lang == "en") {
                        canonical_href = `${base}/ch16-04-extensible-concurrency-sync-and-send.md`;
                    } else {
                        canonical_href = `${base}/${lang}/ch16-04-extensible-concurrency-sync-and-send.md`;
                    }
                    canonical_href = canonical_href.slice(0, -"md".length) + "html";
                    if (canonical_href.endsWith("/index.html")) {
                        canonical_href = canonical_href.slice(0, -"index.html".length);
                    }
                    return canonical_href;
                }
        
                const canonical_href = gen_canonical_href("ko");

                let link = document.createElement("link");
                link.rel = "canonical";
                link.href = canonical_href;
                document.head.appendChild(link);
        
        
                const langs = ["en"  , "ja"  , "ru"  , "ko" ];
        
                for (const lang of langs) {
                    const canonical_href = gen_canonical_href(lang);
        
                    let link = document.createElement("link");
                    link.rel = "alternate";
                    link.hreflang = lang;
                    link.href = canonical_href;
                    document.head.appendChild(link);
                }
            })()
        </script>
        

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="ferris.css">
        <link rel="stylesheet" href="theme/2018-edition.css">
        <link rel="stylesheet" href="theme/semantic-notes.css">
        <link rel="stylesheet" href="theme/listing.css">
        <link rel="stylesheet" href="theme/language-picker.css">


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rust Programming Language</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rust-lang-translations/project" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="sync와-send-트레이트로-확장-가능한-동시성"><a class="header" href="#sync와-send-트레이트로-확장-가능한-동시성"><code>Sync</code>와 <code>Send</code> 트레이트로 확장 가능한 동시성</a></h2>
<p>흥미롭게도, 러스트 언어는 동시성 기능이 <em>거의</em> 없습니다. 이 장에서 지금까지 이야기한 거의 모든 동시성 기능은 언어가 아닌 표준 라이브러리의 일부였습니다. 동시성을 처리하는 여러분의 옵션은 언어나 표준 라이브러리에 제한되지 않습니다; 여러분은 자신만의 동시성 기능을 작성하거나 다른 사람들이 작성한 것을 사용할 수 있습니다.</p>
<p>하지만 두 가지 동시성 개념은 언어에 내장되어 있습니다: <code>std::marker</code> 트레이트인 <code>Sync</code>와 <code>Send</code>입니다.</p>
<h3 id="send를-사용하여-스레드-간-소유권-이동-허용하기"><a class="header" href="#send를-사용하여-스레드-간-소유권-이동-허용하기"><code>Send</code>를 사용하여 스레드 간 소유권 이동 허용하기</a></h3>
<p><code>Send</code> 마커 트레이트는 <code>Send</code>를 구현한 타입의 값의 소유권이 스레드 간에 이동될 수 있음을 나타냅니다. 거의 모든 러스트 타입은 <code>Send</code>이지만, <code>Rc&lt;T&gt;</code>를 포함한 몇 가지 예외가 있습니다: <code>Rc&lt;T&gt;</code> 값을 클론하여 클론의 소유권을 다른 스레드로 전송하려고 하면 두 스레드가 동시에 참조 카운트를 업데이트할 수 있기 때문에 <code>Send</code>가 될 수 없습니다. 이러한 이유로 <code>Rc&lt;T&gt;</code>는 스레드 안전 성능 페널티를 지불하고 싶지 않은 단일 스레드 상황에서 사용하도록 구현되었습니다.</p>
<p>따라서, 러스트의 타입 시스템과 트레이트 바운드는 여러분이 실수로 <code>Rc&lt;T&gt;</code> 값을 스레드 간에 안전하지 않게 보내는 일이 없도록 보장합니다. 목록 16-14에서 이를 시도했을 때, 우리는 <code>the trait Send is not implemented for Rc&lt;Mutex&lt;i32&gt;&gt;</code>라는 에러를 얻었습니다. <code>Send</code>인 <code>Arc&lt;T&gt;</code>로 전환했을 때 코드는 컴파일되었습니다.</p>
<p>Any type composed entirely of <code>Send</code> types is automatically marked as <code>Send</code> as well. Almost all primitive types are <code>Send</code>, aside from raw pointers, which we’ll discuss in Chapter 20.</p>
<h3 id="sync를-사용하여-여러-스레드에서의-접근-허용하기"><a class="header" href="#sync를-사용하여-여러-스레드에서의-접근-허용하기"><code>Sync</code>를 사용하여 여러 스레드에서의 접근 허용하기</a></h3>
<p><code>Sync</code> 마커 트레이트는 <code>Sync</code>를 구현한 타입이 여러 스레드에서 참조되기에 안전함을 나타냅니다. 즉, <code>&amp;T</code>(<code>T</code>에 대한 불변 참조)가 <code>Send</code>라면(참조가 다른 스레드로 안전하게 보내질 수 있다는 의미), <code>T</code>는 <code>Sync</code>입니다. <code>Send</code>와 마찬가지로 기본 타입은 <code>Sync</code>이며, <code>Sync</code>인 타입들로만 구성된 타입도 <code>Sync</code>입니다.</p>
<p>스마트 포인터 <code>Rc&lt;T&gt;</code>는 <code>Send</code>가 아닌 것과 같은 이유로 <code>Sync</code>도 아닙니다. <code>RefCell&lt;T&gt;</code> 타입(15장에서 다루었습니다)과 관련된 <code>Cell&lt;T&gt;</code> 계열의 타입들은 <code>Sync</code>가 아닙니다. <code>RefCell&lt;T&gt;</code>가 런타임에 수행하는 대여 검사 구현은 스레드 안전하지 않습니다. 스마트 포인터 <code>Mutex&lt;T&gt;</code>는 <code>Sync</code>이며, <a href="ch16-03-shared-state.html#sharing-a-mutext-between-multiple-threads">"여러 스레드 간에 <code>Mutex&lt;T&gt;</code> 공유하기"</a><!-- ignore -->에서 본 것처럼 여러 스레드와 접근을 공유하는 데 사용될 수 있습니다.</p>
<h3 id="send와-sync를-수동으로-구현하는-것은-안전하지-않습니다"><a class="header" href="#send와-sync를-수동으로-구현하는-것은-안전하지-않습니다"><code>Send</code>와 <code>Sync</code>를 수동으로 구현하는 것은 안전하지 않습니다</a></h3>
<p><code>Send</code>와 <code>Sync</code> 트레이트로 구성된 타입은 자동으로 <code>Send</code>와 <code>Sync</code>이기도 하므로, 우리는 그러한 트레이트를 수동으로 구현할 필요가 없습니다. 마커 트레이트로서, 구현할 메서드조차 없습니다. 단지 동시성과 관련된 불변성을 강제하는 데 유용할 뿐입니다.</p>
<p>이 트레이트들을 수동으로 구현하는 것은 안전하지 않은 러스트 코드를 구현하는 것을 포함합니다. 20장에서 안전하지 않은 러스트 코드를 사용하는 것에 대해 이야기할 것입니다; 지금으로서 중요한 정보는 <code>Send</code>와 <code>Sync</code> 부분으로 구성되지 않은 새로운 동시성 타입을 구축하는 것은 안전 보장을 유지하기 위해 신중한 생각이 필요하다는 것입니다. <a href="../nomicon/index.html">“The Rustonomicon”</a>에는 이러한 보장과 이를 유지하는 방법에 대한 더 많은 정보가 있습니다.</p>
<h2 id="요약"><a class="header" href="#요약">요약</a></h2>
<p>이 책에서 동시성을 보는 것은 이것이 마지막이 아닙니다. 다음 장 전체가 비동기 프로그래밍에 초점을 맞추고 있으며, 21장의 프로젝트는 여기서 논의된 작은 예제들보다 더 현실적인 상황에서 이 장의 개념들을 사용할 것입니다.</p>
<p>앞서 언급했듯이, 러스트가 동시성을 처리하는 방법 중 언어의 일부인 것은 거의 없기 때문에, 많은 동시성 솔루션이 크레이트로 구현되어 있습니다. 이들은 표준 라이브러리보다 더 빠르게 발전하므로, 멀티스레드 상황에서 사용할 현재의 최첨단 크레이트를 온라인에서 검색해 보세요.</p>
<p>러스트 표준 라이브러리는 메시지 전달을 위한 채널과 <code>Mutex&lt;T&gt;</code> 및 <code>Arc&lt;T&gt;</code>와 같은, 동시성 컨텍스트에서 사용하기에 안전한 스마트 포인터 타입을 제공합니다. 타입 시스템과 대여 검사기는 이러한 솔루션을 사용하는 코드가 데이터 레이스나 유효하지 않은 참조로 끝나지 않도록 보장합니다. 일단 코드를 컴파일하면, 다른 언어에서 흔히 발생하는 추적하기 어려운 버그 없이 멀티스레드에서 행복하게 실행될 것임을 확신할 수 있습니다. 동시 프로그래밍은 더 이상 두려워할 개념이 아닙니다: 나아가서 두려움 없이 프로그램을 동시적으로 만드세요!</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="ch16-03-shared-state.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="ch17-00-async-await.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="ch16-03-shared-state.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="ch17-00-async-await.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="ferris.js"></script>
        <script src="theme/language-picker.js"></script>


    </div>
    </body>
</html>
