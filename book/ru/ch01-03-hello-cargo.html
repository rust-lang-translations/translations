<!DOCTYPE HTML>
<html lang="ru" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Hello, Cargo! - The Rust Programming Language</title>


        <!-- Custom HTML head -->

        <script async src="https://www.googletagmanager.com/gtag/js?id=G-L455DH98TK"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
        
          gtag('config', 'G-L455DH98TK');
        </script>
        
        
        <script>
            (function () {
                // See these pages for details:
                // https://developers.google.com/search/docs/crawling-indexing/consolidate-duplicate-urls
                // https://developers.google.com/search/docs/crawling-indexing/javascript/javascript-seo-basics
        
                function gen_canonical_href(lang) {
        
                    let base = "https://rust-lang-translations.org/book";
        
                    let canonical_href;
                    if (lang == "en") {
                        canonical_href = `${base}/ch01-03-hello-cargo.md`;
                    } else {
                        canonical_href = `${base}/${lang}/ch01-03-hello-cargo.md`;
                    }
                    canonical_href = canonical_href.slice(0, -"md".length) + "html";
                    if (canonical_href.endsWith("/index.html")) {
                        canonical_href = canonical_href.slice(0, -"index.html".length);
                    }
                    return canonical_href;
                }
        
                const canonical_href = gen_canonical_href("ru");

                let link = document.createElement("link");
                link.rel = "canonical";
                link.href = canonical_href;
                document.head.appendChild(link);
        
        
                const langs = ["en"  , "ja"  , "ru" ];
        
                for (const lang of langs) {
                    const canonical_href = gen_canonical_href(lang);
        
                    let link = document.createElement("link");
                    link.rel = "alternate";
                    link.hreflang = lang;
                    link.href = canonical_href;
                    document.head.appendChild(link);
                }
            })()
        </script>
        

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="ferris.css">
        <link rel="stylesheet" href="theme/2018-edition.css">
        <link rel="stylesheet" href="theme/semantic-notes.css">
        <link rel="stylesheet" href="theme/listing.css">
        <link rel="stylesheet" href="theme/language-picker.css">


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rust Programming Language</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rust-lang-translations/project" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="hello-cargo"><a class="header" href="#hello-cargo">Hello, Cargo!</a></h2>
<p>Cargo — это система сборки и менеджер пакетов языка Rust. Многие программисты на Rust используют его для управления своими проектами, поскольку Cargo принимает на себя большое количество забот, таких как сборка вашего кода, загрузка необходимых вашему коду библиотек и их же сборка. (Мы будем называть библиотеки, необходимые вашему коду, <em>зависимостями</em>.)</p>
<p>Простейшие программы на Rust (вроде той, что мы написали), не имеют никаких зависимостей. Если бы мы использовали Cargo для сборки нашего проекта "Hello, world!", он использовал бы лишь тот функционал Cargo, который отвечает за сборку кода. По мере того, как вы будете писать всё более сложные программы на Rust, вы начнёте использовать зависимости; так что если вы будете во всех своих проектах использовать Cargo с самого начала, вам будет легче добавлять зависимости.</p>
<p>Поскольку подавляющее большинство проектов на Rust использует Cargo, оставшаяся часть этой книги будет предполагать его использование и вами. Cargo поставляется вместе с Rust, если вы используете официальный метод установки, описанный в разделе <a href="ch01-01-installation.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0">"Установка"</a><!-- ignore -->. Если вы устанавливали Rust иными средствами, вы можете проверить, установлен ли у вас Cargo, введя эту команду:</p>
<pre><code class="language-console">$ cargo --version
</code></pre>
<p>Если вы видите номер версии, то Cargo у вас есть! Если же видите ошибку, вроде <code>command not found</code>, обратитесь к документации вашего метода установки, чтобы узнать, как отдельно установить Cargo.</p>
<h3 id="Создание-проекта-через-cargo"><a class="header" href="#Создание-проекта-через-cargo">Создание проекта через Cargo</a></h3>
<p>Создадим новый проект через Cargo и посмотрим, чем он будет отличаться от проекта "Hello, world!", написанного нами ранее. Перейдите в директорию <em>projects</em> (или туда, куда вы решили сохранять свой код) и выполните (независимо от вашей операционной системы) эти команды:</p>
<pre><code class="language-console">$ cargo new hello_cargo
$ cd hello_cargo
</code></pre>
<p>Первая команда создаёт новую директорию и проект под названием <em>hello_cargo</em>. Мы назвали проект <em>hello_cargo</em>, так что Cargo создал его файлы в директории с таким же названием.</p>
<p>Перейдите в директорию <em>hello_cargo</em> и посмотрите список файлов. Вы увидите, что Cargo также сгенерировал два файла и одну директорию: файл <em>Cargo.toml</em> и директорию <em>src</em> с файлом <em>main.rs</em> внутри.</p>
<p>Cargo также инициализировал новый Git-репозиторий и создал файл <em>.gitignore</em>. Файлы Git не будут генерироваться, если вы выполните <code>cargo new</code> в уже существующем репозитории. Впрочем, вы можете переписать это поведение, используя <code>cargo new --vcs=git</code>.</p>
<blockquote>
<p>Примечание: По умолчанию, в качестве системы версионирования используется Git. Вы изменить <code>cargo new</code> и использовать другую систему версионирования (version control system) или вовсе отказаться от использования системы версионирования, используя флаг <code>--vcs</code>. Выполните <code>cargo new --help</code>, чтобы увидеть доступные варианты.</p>
</blockquote>
<p>Откройте файл <em>Cargo.toml</em> в вашем текстовом редакторе. Он должен выглядеть как код в Листинге 1-2.</p>
<Listing number="1-2" file-name="Cargo.toml" caption="Contents of *Cargo.toml* generated by `cargo new`">
<pre><code class="language-toml">[package]
name = "hello_cargo"
version = "0.1.0"
edition = "2021"

[dependencies]
</code></pre>
</Listing>
<p>Этот файл использует формат <a href="https://toml.io"><em>TOML</em></a><!-- ignore --> (<em>Tom’s Obvious, Minimal Language</em>), принятый в Cargo для файлов конфигурации.</p>
<p>Первая строчка, <code>[package]</code> — это заголовок раздела, обозначающий, что все следующие строчки задают конфигурации пакета. Позже мы добавим больше информации в этот раздел, а также добавим новые разделы.</p>
<p>Следующие три строчки устанавливают конфигурационную информацию, необходимую Cargo для компиляции вашей программы: название, версию и используемую редакцию Rust. Мы обсудим ключ конфигурации <code>edition</code> в <a href="appendix-05-editions.html">Приложении E</a><!-- ignore -->.</p>
<p>Последняя строчка, <code>[dependencies]</code> — это начало раздела, где вам нужно указывать зависимости вагего проекта. Пакеты кода на Rust называются <em>крейтами</em> (<em>crates</em>). Для нашего текущего проекта нам не нужны никакие другие крейты, но в Главе 2 они нам понадобятся, и тогда же мы воспользуемся разделом зависимостей.</p>
<p>Теперь откройте <em>src/main.rs</em> и взгляните на код:</p>
<p><span class="filename">Файл: src/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust edition2021">fn main() {
    println!("Hello, world!");
}</code></pre></pre>
<p>Cargo сгенерировал программу "Hello, world!" — прямо такую же, какую мы написали в Листинге 1-1! Вообще, вся разница между нашим проектом и проектом, созданным Cargo, состоит лишь в том, что Cargo поместил код в директории <em>src</em> и создал конфигурационный файл <em>Cargo.toml</em> в корневой директории проекта.</p>
<p>Cargo ожидает, что ваши исходные файлы будут находиться в директории <em>src</em>. Корневая директория проекта предназначена лишь для файлов README, информации о лицензиях, конфигурационных файлов и всего прочего, что не относится к непостредственно коду. Использование Cargo поможет вам организовывать свои проекты. С ним для всего найдётся место, и всё разместится на своих местах.</p>
<p>Если вы создали свой проект без Cargo (например, как мы ранее сделали с проектом "Hello, world!"), вы можете преобразовать его в проект, использующий Cargo. Переместите код проекта в директорию <em>src</em> и создайте правильный файл <em>Cargo.toml</em>. Проще всего получить такой файл можно, использовав команду <code>cargo init</code> — она создаст его автоматически.</p>
<h3 id="Сборка-и-запуск-проекта-с-помощью-cargo"><a class="header" href="#Сборка-и-запуск-проекта-с-помощью-cargo">Сборка и запуск проекта с помощью Cargo</a></h3>
<p>Посмотрим, чем особенны сборка и запуск программы "Hello, world!" с помощью Cargo! Перейдите в директорию <em>hello_cargo</em> и соберите проект, введя следующую команду:</p>
<pre><code class="language-console">$ cargo build
   Compiling hello_cargo v0.1.0 (file:///projects/hello_cargo)
    Finished dev [unoptimized + debuginfo] target(s) in 2.85 secs
</code></pre>
<p>Эта команда создаёт исполняемый файл по пути <em>target/debug/hello_cargo</em> (или  <em>target\debug\hello_cargo.exe</em> на Windows), а не корневой директории проекта. Поскольку по умолчанию используется сборка в режиме отладки (debug), Cargo положил бинарный файл в директорию под названием <em>debug</em>. Вы можете запустить исполняемый файл, написав в консоли:</p>
<pre><code class="language-console">$ ./target/debug/hello_cargo # or .\target\debug\hello_cargo.exe on Windows
Hello, world!
</code></pre>
<p>Если всё хорошо, вы увидите <code>Hello, world!</code> в терминале. Запуск  <code>cargo build</code> в первый раз приводит к появлению нового файла в директории проекта: <em>Cargo.lock</em>. Этот файл хранит точные версии зависимостей, используемых в вашем проекте. Наш проект не имеет зависимостей, так что этот файл слегка пуст. Вам никогда не понадобится редактировать этот файл вручную; Cargo будет управлять им самостоятельно.</p>
<p>Мы только что собрали проект с помощью <code>cargo build</code> и запустили его через <code>./target/debug/hello_cargo</code>, но мы также можем использовать <code>cargo run</code>, чтобы одной командой скомпилировать код и затем запустить полученный исполняемый файл:</p>
<pre><code class="language-console">$ cargo run
    Finished dev [unoptimized + debuginfo] target(s) in 0.0 secs
     Running `target/debug/hello_cargo`
Hello, world!
</code></pre>
<p>Использование <code>cargo run</code> удобнее, чем необоходимость помнить выполнять <code>cargo build</code> и затем запускать программу, обращаясь по полному пути, так что большинство программистов применяют <code>cargo run</code>.</p>
<p>Отметим, что в этот раз мы не увидели сообщений Cargo о компиляции <code>hello_cargo</code>. Cargo понял, что файлы проекта не поменялись, так что он не стал проводить пересборку и просто запустил имеющийся бинарный файл. Если бы вы отредактировали исходный код, Cargo бы пересобрал проект перед запуском, и вы бы увидели сообщение вроде такого:</p>
<pre><code class="language-console">$ cargo run
   Compiling hello_cargo v0.1.0 (file:///projects/hello_cargo)
    Finished dev [unoptimized + debuginfo] target(s) in 0.33 secs
     Running `target/debug/hello_cargo`
Hello, world!
</code></pre>
<p>Cargo также предоставляет команду <code>cargo check</code>. Эта команда быстро проверяет ваш код, чтобы убедиться, что он компилируется; однако, она не создаёт исполняемый файл:</p>
<pre><code class="language-console">$ cargo check
   Checking hello_cargo v0.1.0 (file:///projects/hello_cargo)
    Finished dev [unoptimized + debuginfo] target(s) in 0.32 secs
</code></pre>
<p>Почему вам может быть не нужен исполняемый файл? Часто проверка через <code>cargo check</code> значительно быстрее, чем <code>cargo build</code>, поскольку она не выполняет непостредственно компиляцию программы. Если вы будете периодически проверять свой код по мере написания, использование <code>cargo check</code> позволит без больших трат времени убеждаться, что проект всё ещё компилируется! Поэтому, многие программисты на Rust периодически запускают <code>cargo check</code> по мере работы над программой. А <code>cargo build</code> применяется тогда, когда программа готова к использованию.</p>
<p>Повторим то, что мы узнали о Cargo:</p>
<ul>
<li>Мы можем создавать проекты, используя <code>cargo new</code>.</li>
<li>Мы можем собирать проекты, используя <code>cargo build</code>.</li>
<li>Мы можем собирать и запускать проекты одной командой <code>cargo run</code>.</li>
<li>Мы можем проверить код на ошибки компиляции, не создавая исполняемый файл, используя <code>cargo check</code>.</li>
<li>Cargo сохраняет результаты сборки не в корневую директорию проекта, а в директорию <em>target/debug</em>.</li>
</ul>
<p>Дополнительным преимуществом использования Cargo является то, что его команды будут одинаковы для любых операционных систем. Так что с этого моменты мы более не будем предоставлять инструкции, специфичные для Linux и macOS или Windows.</p>
<h3 id="Создание-релизной-версии"><a class="header" href="#Создание-релизной-версии">Создание релизной версии</a></h3>
<p>Когда ваш проект наконец-то готов в релизу, вы можете использовать <code>cargo build --release</code>, чтобы собрать его с оптимизациями. Эта команда создаст исполняемый файл не в <em>target/debug</em>, а в <em>target/release</em>. Оптимизации делают ваш код на Rust более быстрым, но их включение также увеличивает время компиляции. Поэтому есть два профиля компиляции: один для разработки, когда вы хотите быстро и часто пересобирать проект; и другой, для сборки окончательной версии программы, которая будет распространяться среди конечных пользователей и которая потому должна работать предельно быстро. Если вы замеряете быстродействие своего кода, не забудьте собрать его через <code>cargo build --release</code>, а замеры проводите над исполняемым файлом из директории <em>target/release</em>.</p>
<h3 id="cargo-как-соглашение-между-программистами"><a class="header" href="#cargo-как-соглашение-между-программистами">Cargo как соглашение между программистами</a></h3>
<p>При работе с маленькими проектами, Cargo не сильно полезнее <code>rustc</code>, но он будет полезен, когда ваши программы станут более сложными. Когда ваша программа разрастётся до нескольких файлов или ей понадобится зависимость, стоит дать Cargo управлять сборкой.</p>
<p>Пусть проект <code>hello_cargo</code> и простой, но на его примере видно применение реального инструмента, который будет с вами на протяжении всего вашего пути в Rust. Когда вам понадобится работать над проектами, размещёнными в сети, вы можете использовать следующие команды, чтобы получить код из репозитория Git, перейти в его директорию, и собрать:</p>
<pre><code class="language-console">$ git clone example.org/someproject
$ cd someproject
$ cargo build
</code></pre>
<p>Больше информации о Cargo можно найти в <a href="https://doc.rust-lang.org/cargo/">его документации</a>.</p>
<h2 id="Подведём-итоги"><a class="header" href="#Подведём-итоги">Подведём итоги</a></h2>
<p>Это был очень хороший старт вашего путешествия в мир Rust! В этой главе вы узнали, как:</p>
<ul>
<li>Установить последнюю стабильную версию Rust, используя <code>rustup</code></li>
<li>Обновиться до более новой версии Rust</li>
<li>Открыть локально установленную документацию</li>
<li>Написать и запустить программу "Hello, world!" напрямую с помощью <code>rustc</code></li>
<li>Создать и запустить новый проект, используя команды Cargo</li>
</ul>
<p>Отличная возможность создать более существенную программу и научиться читать и писать код на Rust. В Главе 2 мы напишем игру в угадайку. Но, если вы хотели бы изучить, как в Rust устроены общие понятия программирования, посмотрите Главу 3 и потом вернитесь к Главе 2.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="ch01-02-hello-world.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="ch02-00-guessing-game-tutorial.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="ch01-02-hello-world.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="ch02-00-guessing-game-tutorial.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="ferris.js"></script>
        <script src="theme/language-picker.js"></script>


    </div>
    </body>
</html>
