<!DOCTYPE HTML>
<html lang="ko" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>언와인딩 - The Rustonomicon</title>


        <!-- Custom HTML head -->

        <script async src="https://www.googletagmanager.com/gtag/js?id=G-L455DH98TK"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
        
          gtag('config', 'G-L455DH98TK');
        </script>
        
        
        <script>
            (function () {
                // See these pages for details:
                // https://developers.google.com/search/docs/crawling-indexing/consolidate-duplicate-urls
                // https://developers.google.com/search/docs/crawling-indexing/javascript/javascript-seo-basics
        
                function gen_canonical_href(lang) {
        
                    let base = "https://rust-lang-translations.org/nomicon";
        
                    let canonical_href;
                    if (lang == "en") {
                        canonical_href = `${base}/unwinding.md`;
                    } else {
                        canonical_href = `${base}/${lang}/unwinding.md`;
                    }
                    canonical_href = canonical_href.slice(0, -"md".length) + "html";
                    if (canonical_href.endsWith("/index.html")) {
                        canonical_href = canonical_href.slice(0, -"index.html".length);
                    }
                    return canonical_href;
                }
        
                const canonical_href = gen_canonical_href("ko");

                let link = document.createElement("link");
                link.rel = "canonical";
                link.href = canonical_href;
                document.head.appendChild(link);
        
        
                const langs = ["en"  , "ko" ];
        
                for (const lang of langs) {
                    const canonical_href = gen_canonical_href(lang);
        
                    let link = document.createElement("link");
                    link.rel = "alternate";
                    link.hreflang = lang;
                    link.href = canonical_href;
                    document.head.appendChild(link);
                }
            })()
        </script>
        

        <meta name="description" content="The Dark Arts of Advanced and Unsafe Rust Programming">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/nomicon.css">
        <link rel="stylesheet" href="theme/language-picker.css">


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rustonomicon</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rust-lang-translations/project" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="언와인딩"><a class="header" href="#언와인딩">언와인딩</a></h1>
<p>러스트는 <em>계층화된</em> 에러 처리 체계를 가지고 있습니다:</p>
<ul>
<li>어떤 것이 합리적으로 부재할 가능성이 있다면, <code>Option</code>을 사용합니다.</li>
<li>무언가 잘못되었지만 합리적으로 처리 가능하다면, <code>Result</code>를 사용합니다.</li>
<li>무언가 잘못되었는데 합리적으로 처리할 수 없다면, 스레드는 패닉(panic)을 일으킵니다.</li>
<li>치명적인 일이 발생하면, 프로그램은 중단(abort)됩니다.</li>
</ul>
<p>대부분의 상황에서는 <code>Option</code>과 <code>Result</code>가 압도적으로 선호됩니다. 특히 이들은 API 사용자의 재량에 따라 패닉이나 중단으로 승격될 수 있기 때문입니다. 패닉은 스레드의 정상적인 실행을 멈추고 스택을 언와인드(unwind)하며, 마치 모든 함수가 즉시 반환된 것처럼 소멸자들을 호출합니다.</p>
<p>1.0 버전 기준으로, 패닉에 대해 러스트는 두 가지 생각을 가지고 있습니다. 아주 먼 옛날, 러스트는 얼랑(Erlang)과 훨씬 더 비슷했습니다. 얼랑처럼 러스트도 경량 태스크(lightweight tasks)를 가졌고, 태스크가 감당할 수 없는 상태에 도달하면 패닉과 함께 스스로 죽도록 고안되었습니다. 자바나 C++의 예외와는 달리, 패닉은 아무 때나 잡힐 수 없었습니다. 패닉은 태스크의 소유자만이 잡을 수 있었고, 그 시점에서 처리되지 않으면 <em>그</em> 태스크 자체가 패닉을 일으켰습니다.</p>
<p>언와인딩은 이 이야기에서 매우 중요했습니다. 태스크의 소멸자가 호출되지 않으면 메모리와 기타 시스템 자원이 누수될 것이기 때문입니다. 태스크가 정상적인 실행 도중에 죽을 수도 있는 환경에서, 이는 러스트를 장시간 실행되는 시스템에 부적합하게 만들었을 것입니다!</p>
<p>오늘날 우리가 아는 러스트가 만들어지면서, 추상화를 줄이려는 움직임 속에 이런 스타일의 프로그래밍은 점차 유행에서 멀어지게 되었습니다. 경량 태스크들은 중량급 OS 스레드들에게 자리를 내주고 사라졌습니다. 여전히 1.0 안정 버전 러스트에서 패닉은 부모 스레드에 의해서만 잡힐 수 있습니다. 이는 패닉을 잡기 위해 OS 스레드를 통째로 하나 띄워야 함을 의미합니다! 이는 안타깝게도 제로 비용 추상화라는 러스트의 철학과 충돌합니다.</p>
<p>스레드를 생성하지 않고도 패닉을 잡을 수 있게 해주는 <a href="https://doc.rust-lang.org/std/panic/fn.catch_unwind.html"><code>catch_unwind</code></a>라는 API가 있습니다. 하지만 우리는 여전히 이를 자제해서 사용하기를 권장합니다. 특히 러스트의 현재 언와인딩 구현은 "언와인드되지 않는" 경우에 매우 최적화되어 있습니다. 프로그램이 언와인드되지 않는다면, 언와인드될 _준비_가 되어 있다는 것만으로 인한 런타임 비용은 없어야 합니다. 그 결과, 실제로 언와인딩이 일어날 때는 자바(Java)와 같은 언어보다 더 많은 비용이 듭니다. 정상적인 상황에서 언와인드가 발생하도록 프로그램을 설계하지 마세요. 이상적으로는 프로그래밍 에러나 <em>극단적인</em> 문제가 발생했을 때만 패닉을 일으켜야 합니다.</p>
<p>러스트의 언와인딩 전략은 다른 언어의 언와인딩과 근본적으로 호환되도록 명시되어 있지 않습니다. 따라서 다른 언어에서 러스트로, 혹은 러스트에서 다른 언어로 언와인드하는 것은 정의되지 않은 동작입니다. FFI 경계에서는 <em>반드시</em> 모든 패닉을 잡아야 합니다! 그 시점에서 무엇을 할지는 여러분에게 달려 있지만, <em>어떤 조치든</em> 취해야 합니다. 이를 소홀히 한다면 기껏해야 애플리케이션이 완전히 망가져서 중단되겠지만, 최악의 경우 애플리케이션이 중단되지 <em>않고</em> 완전히 엉망이 된 상태로 계속 실행될 것입니다.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="leaking.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="exception-safety.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="leaking.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="exception-safety.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="theme/language-picker.js"></script>


    </div>
    </body>
</html>
