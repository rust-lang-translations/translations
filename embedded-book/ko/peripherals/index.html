<!DOCTYPE HTML>
<html lang="ko" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>주변장치 - The Embedded Rust Book</title>


        <!-- Custom HTML head -->

        <script async src="https://www.googletagmanager.com/gtag/js?id=G-L455DH98TK"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
        
          gtag('config', 'G-L455DH98TK');
        </script>
        
        
        <script>
            (function () {
                // See these pages for details:
                // https://developers.google.com/search/docs/crawling-indexing/consolidate-duplicate-urls
                // https://developers.google.com/search/docs/crawling-indexing/javascript/javascript-seo-basics
        
                function gen_canonical_href(lang) {
        
                    let base = "https://rust-lang-translations.org/embedded-book";
        
                    let canonical_href;
                    if (lang == "en") {
                        canonical_href = `${base}/peripherals/index.md`;
                    } else {
                        canonical_href = `${base}/${lang}/peripherals/index.md`;
                    }
                    canonical_href = canonical_href.slice(0, -"md".length) + "html";
                    if (canonical_href.endsWith("/index.html")) {
                        canonical_href = canonical_href.slice(0, -"index.html".length);
                    }
                    return canonical_href;
                }
        
                const canonical_href = gen_canonical_href("ko");

                let link = document.createElement("link");
                link.rel = "canonical";
                link.href = canonical_href;
                document.head.appendChild(link);
        
        
                const langs = ["en"  , "ko" ];
        
                for (const lang of langs) {
                    const canonical_href = gen_canonical_href(lang);
        
                    let link = document.createElement("link");
                    link.rel = "alternate";
                    link.hreflang = lang;
                    link.href = canonical_href;
                    document.head.appendChild(link);
                }
            })()
        </script>
        

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/language-picker.css">


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Embedded Rust Book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rust-lang-translations/project" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="주변장치"><a class="header" href="#주변장치">주변장치</a></h1>
<h2 id="주변-장치란-무엇인가요"><a class="header" href="#주변-장치란-무엇인가요">주변 장치란 무엇인가요?</a></h2>
<p>대부분의 마이크로컨트롤러에는 CPU, RAM 또는 플래시 메모리 외에 마이크로컨트롤러 외부 시스템과 상호 작용하는 데 사용되는 실리콘 섹션과 센서, 모터 컨트롤러 또는 디스플레이나 키보드와 같은 인간 인터페이스를 통해 주변 환경과 직접 및 간접적으로 상호 작용하는 데 사용되는 실리콘 섹션이 포함되어 있습니다. 이러한 구성 요소를 총칭하여 주변 장치라고 합니다.</p>
<p>이러한 주변 장치는 개발자가 처리를 오프로드하여 소프트웨어에서 모든 것을 처리할 필요가 없도록 해주기 때문에 유용합니다. 데스크톱 개발자가 그래픽 처리를 비디오 카드로 오프로드하는 것과 유사하게 임베디드 개발자는 일부 작업을 주변 장치로 오프로드하여 CPU가 다른 중요한 작업을 수행하거나 전력을 절약하기 위해 아무것도 하지 않도록 할 수 있습니다.</p>
<p>1970년대나 1980년대의 구식 가정용 컴퓨터의 주 회로 기판을 보면(그리고 실제로 어제의 데스크톱 PC는 오늘날의 임베디드 시스템과 그리 멀지 않습니다) 다음과 같은 것을 볼 수 있습니다.</p>
<ul>
<li>프로세서</li>
<li>RAM 칩</li>
<li>ROM 칩</li>
<li>I/O 컨트롤러</li>
</ul>
<p>RAM 칩, ROM 칩 및 I/O 컨트롤러(이 시스템의 주변 장치)는 '버스'라고 하는 일련의 병렬 트레이스를 통해 프로세서에 연결됩니다. 이 버스는 프로세서가 통신하려는 버스의 장치를 선택하는 주소 정보와 실제 데이터를 전달하는 데이터 버스를 전달합니다. 임베디드 마이크로컨트롤러에서도 동일한 원칙이 적용됩니다. 단지 모든 것이 단일 실리콘 조각에 패키징되어 있다는 점만 다릅니다.</p>
<p>그러나 일반적으로 Vulkan, Metal 또는 OpenGL과 같은 소프트웨어 API가 있는 그래픽 카드와 달리 주변 장치는 메모리 청크에 매핑된 하드웨어 인터페이스를 통해 마이크로컨트롤러에 노출됩니다.</p>
<h2 id="선형-및-실제-메모리-공간"><a class="header" href="#선형-및-실제-메모리-공간">선형 및 실제 메모리 공간</a></h2>
<p>마이크로컨트롤러에서 <code>0x4000_0000</code> 또는 <code>0x0000_0000</code>과 같은 다른 임의의 주소에 일부 데이터를 쓰는 것도 완전히 유효한 작업일 수 있습니다.</p>
<p>데스크톱 시스템에서 메모리 액세스는 MMU 또는 메모리 관리 장치에 의해 엄격하게 제어됩니다. 이 구성 요소는 메모리 섹션에 대한 액세스 권한을 적용하고(한 프로세스가 다른 프로세스의 메모리를 읽거나 수정하는 것을 방지) 물리적 메모리의 세그먼트를 소프트웨어에서 사용되는 가상 메모리 범위로 다시 매핑하는 두 가지 주요 책임을 가집니다. 마이크로컨트롤러는 일반적으로 MMU가 없으며 대신 소프트웨어에서 실제 물리적 주소만 사용합니다.</p>
<p>32비트 마이크로컨트롤러는 <code>0x0000_0000</code>에서 <code>0xFFFF_FFFF</code>까지의 실제 및 선형 주소 공간을 가지고 있지만 일반적으로 실제 메모리에 대해 해당 범위의 수백 킬로바이트만 사용합니다. 이로 인해 상당한 양의 주소 공간이 남게 됩니다. 이전 장에서는 RAM이 <code>0x2000_0000</code> 주소에 위치한다고 이야기했습니다. RAM이 64KiB 길이(즉, 최대 주소가 0xFFFF)라면 <code>0x2000_0000</code>에서 <code>0x2000_FFFF</code>까지의 주소는 RAM에 해당합니다. <code>0x2000_1234</code> 주소에 있는 변수에 쓸 때 내부적으로 발생하는 일은 일부 논리가 주소의 상위 부분(이 예에서는 0x2000)을 감지한 다음 RAM을 활성화하여 주소의 하위 부분(이 경우 0x1234)에 대해 작동할 수 있도록 하는 것입니다. Cortex-M에서는 플래시 ROM이 <code>0x0000_0000</code> 주소에서 최대 <code>0x0007_FFFF</code> 주소(512KiB 플래시 ROM이 있는 경우)까지 매핑되어 있습니다. 이 두 영역 사이의 모든 나머지 공간을 무시하는 대신 마이크로컨트롤러 설계자는 특정 메모리 위치에 주변 장치용 인터페이스를 매핑했습니다. 이것은 다음과 같이 보입니다.</p>
<p><img src="../assets/nrf52-memory-map.png" alt="" /></p>
<p><a href="http://infocenter.nordicsemi.com/pdf/nRF52832_PS_v1.1.pdf">Nordic nRF52832 데이터시트 (pdf)</a></p>
<h2 id="메모리-매핑-주변장치"><a class="header" href="#메모리-매핑-주변장치">메모리 매핑 주변장치</a></h2>
<p>이러한 주변 장치와의 상호 작용은 언뜻 보기에는 간단합니다. 올바른 데이터를 올바른 주소에 쓰는 것입니다. 예를 들어, 직렬 포트를 통해 32비트 워드를 보내는 것은 특정 메모리 주소에 해당 32비트 워드를 쓰는 것만큼 직접적일 수 있습니다. 그러면 직렬 포트 주변 장치가 인계받아 데이터를 자동으로 보냅니다.</p>
<p>이러한 주변 장치의 구성도 비슷하게 작동합니다. 주변 장치를 구성하기 위해 함수를 호출하는 대신 하드웨어 API 역할을 하는 메모리 청크가 노출됩니다. SPI 주파수 구성 레지스터에 <code>0x8000_0000</code>을 쓰면 SPI 포트는 초당 8메가비트로 데이터를 보냅니다. 동일한 주소에 <code>0x0200_0000</code>을 쓰면 SPI 포트는 초당 125킬로비트로 데이터를 보냅니다. 이러한 구성 레지스터는 다음과 같이 보입니다.</p>
<p><img src="../assets/nrf52-spi-frequency-register.png" alt="" /></p>
<p><a href="http://infocenter.nordicsemi.com/pdf/nRF52832_PS_v1.1.pdf">Nordic nRF52832 데이터시트 (pdf)</a></p>
<p>이 인터페이스는 어셈블리, C 또는 Rust 등 어떤 언어를 사용하든 하드웨어와 상호 작용하는 방식입니다.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../start/io.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../peripherals/a-first-attempt.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../start/io.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../peripherals/a-first-attempt.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../theme/language-picker.js"></script>


    </div>
    </body>
</html>
